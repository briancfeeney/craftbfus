!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){if(e.minTime&&(e.minTime=y(e.minTime)),e.maxTime&&(e.maxTime=y(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=y(e.durationTime)),e.disableTimeRanges.length>0){for(var t in e.disableTimeRanges)e.disableTimeRanges[t]=[y(e.disableTimeRanges[t][0]),y(e.disableTimeRanges[t][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var t=e.disableTimeRanges.length-1;t>0;t--)e.disableTimeRanges[t][0]<=e.disableTimeRanges[t-1][1]&&(e.disableTimeRanges[t-1]=[Math.min(e.disableTimeRanges[t][0],e.disableTimeRanges[t-1][0]),Math.max(e.disableTimeRanges[t][1],e.disableTimeRanges[t-1][1])],e.disableTimeRanges.splice(t,1))}return e}function n(t){var n=t.data("timepicker-settings"),s=t.data("timepicker-list");if(s&&s.length&&(s.remove(),t.data("timepicker-list",!1)),n.useSelect){s=e("<select />",{"class":"ui-timepicker-select"});var o=s}else{s=e("<ul />",{"class":"ui-timepicker-list"});var o=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});o.css({display:"none",position:"absolute"}).append(s)}if(n.noneOption)if(n.noneOption===!0&&(n.noneOption=n.useSelect?"Time...":"None"),e.isArray(n.noneOption))for(var a in n.noneOption){var l=r(n.noneOption[a],n.useSelect);s.append(l)}else{var l=r(n.noneOption,n.useSelect);s.append(l)}n.className&&o.addClass(n.className),null===n.minTime&&null===n.durationTime||!n.showDuration||o.addClass("ui-timepicker-with-duration");var c=n.minTime;"function"==typeof n.durationTime?c=y(n.durationTime()):null!==n.durationTime&&(c=n.durationTime);var p=null!==n.minTime?n.minTime:0,d=null!==n.maxTime?n.maxTime:p+E-1;p>=d&&(d+=E),d===E-1&&-1!==n.timeFormat.indexOf("H")&&(d=E);for(var b=n.disableTimeRanges,w=0,S=b.length,a=p;d>=a;a+=60*n.step){var x=a,N=g(x,n.timeFormat);if(n.useSelect){var C=e("<option />",{value:N});C.text(N)}else{var C=e("<li />");C.data("time",86400>=x?x:x%86400),C.text(N)}if((null!==n.minTime||null!==n.durationTime)&&n.showDuration){var k=m(a-c);if(n.useSelect)C.text(C.text()+" ("+k+")");else{var L=e("<span />",{"class":"ui-timepicker-duration"});L.text(" ("+k+")"),C.append(L)}}S>w&&(x>=b[w][1]&&(w+=1),b[w]&&x>=b[w][0]&&x<b[w][1]&&(n.useSelect?C.prop("disabled",!0):C.addClass("ui-timepicker-disabled"))),s.append(C)}if(o.data("timepicker-input",t),t.data("timepicker-list",o),n.useSelect)s.val(i(t.val(),n)),s.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),s.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),s.on("change",function(){h(t,e(this).val(),"select")}),t.hide().after(s);else{var A=n.appendTo;"string"==typeof A?A=e(A):"function"==typeof A&&(A=A(t)),A.append(o),f(t,s),s.on("click","li",function(){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",T.show)}),u(t)||t[0].focus(),s.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),v(t)&&(t.trigger("hideTimepicker"),o.hide())})}}function r(t,n){var r,i,s;return"object"==typeof t?(r=t.label,i=t.className,s=t.value):"string"==typeof t?r=t:e.error("Invalid noneOption value"),n?e("<option />",{value:s,"class":i,text:r}):e("<li />",{"class":i,text:r}).data("time",s)}function i(t,n){if(e.isNumeric(t)||(t=y(t)),null===t)return null;var r=60*n.step;return g(Math.round(t/r)*r,n.timeFormat)}function s(){return new Date(1970,1,1,0,0,0)}function o(t){var n=e(t.target),r=n.closest(".ui-timepicker-input");0===r.length&&0===n.closest(".ui-timepicker-wrapper").length&&(T.hide(),e(document).unbind(".ui-timepicker"))}function u(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function a(t,n,r){if(!r&&0!==r)return!1;var i=t.data("timepicker-settings"),s=!1,o=30*i.step;return n.find("li").each(function(t,n){var i=e(n);if("number"==typeof i.data("time")){var u=i.data("time")-r;return Math.abs(u)<o||u==o?(s=i,!1):void 0}}),s}function f(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=y(c(e));if(null!==n){var r=a(e,t,n);if(r){var i=r.offset().top-t.offset().top;(i+r.outerHeight()>t.outerHeight()||0>i)&&t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight()),r.addClass("ui-timepicker-selected")}}}function l(){if(""!==this.value){var t=e(this),n=t.data("timepicker-list");if(!n||!n.is(":visible")){var r=y(this.value);if(null===r)return void t.trigger("timeFormatError");var i=t.data("timepicker-settings"),s=!1;if(null!==i.minTime&&r<i.minTime?s=!0:null!==i.maxTime&&r>i.maxTime&&(s=!0),e.each(i.disableTimeRanges,function(){return r>=this[0]&&r<this[1]?(s=!0,!1):void 0}),i.forceRoundTime){var o=r%(60*i.step);o>=30*i.step?r+=60*i.step-o:r-=o}var u=g(r,i.timeFormat);s?h(t,u,"error")&&t.trigger("timeRangeError"):h(t,u)}}}function c(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function h(e,t,n){if(e.is("input")){e.val(t);var r=e.data("timepicker-settings");r.useSelect&&e.data("timepicker-list").val(i(t,r))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==n?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=n&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function p(t){var n=e(this),r=n.data("timepicker-list");if(!r||!r.is(":visible")){if(40!=t.keyCode)return!0;u(n)||n.focus()}switch(t.keyCode){case 13:return v(n)&&T.hide.apply(this),t.preventDefault(),!1;case 38:var i=r.find(".ui-timepicker-selected");return i.length?i.is(":first-child")||(i.removeClass("ui-timepicker-selected"),i.prev().addClass("ui-timepicker-selected"),i.prev().position().top<i.outerHeight()&&r.scrollTop(r.scrollTop()-i.outerHeight())):(r.find("li").each(function(t,n){return e(n).position().top>0?(i=e(n),!1):void 0}),i.addClass("ui-timepicker-selected")),!1;case 40:return i=r.find(".ui-timepicker-selected"),0===i.length?(r.find("li").each(function(t,n){return e(n).position().top>0?(i=e(n),!1):void 0}),i.addClass("ui-timepicker-selected")):i.is(":last-child")||(i.removeClass("ui-timepicker-selected"),i.next().addClass("ui-timepicker-selected"),i.next().position().top+2*i.outerHeight()>r.outerHeight()&&r.scrollTop(r.scrollTop()+i.outerHeight())),!1;case 27:r.find("li").removeClass("ui-timepicker-selected"),T.hide();break;case 9:T.hide();break;default:return!0}}function d(t){var n=e(this),r=n.data("timepicker-list");if(!r||!r.is(":visible"))return!0;if(!n.data("timepicker-settings").typeaheadHighlight)return r.find("li").removeClass("ui-timepicker-selected"),!0;switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:f(n,r);break;default:return}}function v(e){var t=e.data("timepicker-settings"),n=e.data("timepicker-list"),r=null,i=n.find(".ui-timepicker-selected");if(i.hasClass("ui-timepicker-disabled"))return!1;if(i.length?r=i.data("time"):c(e)&&(r=y(c(e)),f(e,n)),null!==r)if("string"==typeof r)e.val(r);else{var s=g(r,t.timeFormat);h(e,s,"select")}return!0}function m(e){var t,n=Math.round(e/60);if(Math.abs(n)<60)t=[n,x.mins];else if(60==n)t=["1",x.hr];else{var r=(n/60).toFixed(1);"."!=x.decimal&&(r=r.replace(".",x.decimal)),t=[r,x.hrs]}return t.join(" ")}function g(e,t){if(null!==e){var n=new Date(w.valueOf()+1e3*e);if(!isNaN(n.getTime())){for(var r,i,s="",o=0;o<t.length;o++)switch(i=t.charAt(o)){case"a":s+=n.getHours()>11?x.pm:x.am;break;case"A":s+=n.getHours()>11?x.PM:x.AM;break;case"g":r=n.getHours()%12,s+=0===r?"12":r;break;case"G":s+=n.getHours();break;case"h":r=n.getHours()%12,0!==r&&10>r&&(r="0"+r),s+=0===r?"12":r;break;case"H":r=n.getHours(),e===E&&(r=24),s+=r>9?r:"0"+r;break;case"i":var u=n.getMinutes();s+=u>9?u:"0"+u;break;case"s":e=n.getSeconds(),s+=e>9?e:"0"+e;break;default:s+=i}return s}}}function y(e){if(""===e)return null;if(!e||e+0==e)return e;"object"==typeof e&&(e=e.getHours()+":"+b(e.getMinutes())+":"+b(e.getSeconds())),e=e.toLowerCase();var t;new Date(0);if(-1===e.indexOf(":")?(t=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/),t||(t=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))):t=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/),!t)return null;var n,r=parseInt(1*t[1],10);n=t[4]?12==r?"p"==t[4]?12:0:r+("p"==t[4]?12:0):r;var i=1*t[2]||0,s=1*t[3]||0;return 3600*n+60*i+s}function b(e){return("0"+e).slice(-2)}var w=s(),E=86400,S={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},x={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},T={init:function(r){return this.each(function(){var i=e(this),s=[];for(key in S)i.data(key)&&(s[key]=i.data(key));var o=e.extend({},S,s,r);o.lang&&(x=e.extend(x,o.lang)),o=t(o),i.data("timepicker-settings",o),i.addClass("ui-timepicker-input"),o.useSelect?n(i):(i.prop("autocomplete","off"),i.on("click.timepicker focus.timepicker",T.show),i.on("change.timepicker",l),i.on("keydown.timepicker",p),i.on("keyup.timepicker",d),l.call(i.get(0)))})},show:function(t){t&&t.preventDefault();var r=e(this),i=r.data("timepicker-settings");if(i.useSelect)return void r.data("timepicker-list").focus();u(r)&&r.blur();var s=r.data("timepicker-list");if(!r.prop("readonly")&&(s&&0!==s.length&&"function"!=typeof i.durationTime||(n(r),s=r.data("timepicker-list")),!s.is(":visible"))){T.hide(),s.show();var f={};f.left="rtl"==i.orientation?r.offset().left+r.outerWidth()-s.outerWidth()+parseInt(s.css("marginLeft").replace("px",""),10):r.offset().left+parseInt(s.css("marginLeft").replace("px",""),10),f.top=r.offset().top+r.outerHeight(!0)+s.outerHeight()>e(window).height()+e(window).scrollTop()?r.offset().top-s.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10):r.offset().top+r.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10),s.offset(f);var l=s.find(".ui-timepicker-selected");if(l.length||(c(r)?l=a(r,s,y(c(r))):i.scrollDefaultNow?l=a(r,s,y(new Date)):i.scrollDefaultTime!==!1&&(l=a(r,s,y(i.scrollDefaultTime)))),l&&l.length){var h=s.scrollTop()+l.position().top-l.outerHeight();s.scrollTop(h)}else s.scrollTop(0);return e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",o),i.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",o),r.trigger("showTimepicker"),this}},hide:function(){var t=e(this),n=t.data("timepicker-settings");return n&&n.useSelect&&t.blur(),e(".ui-timepicker-wrapper:visible").each(function(){var t=e(this),n=t.data("timepicker-input"),r=n.data("timepicker-settings");r&&r.selectOnBlur&&v(n),t.hide(),n.trigger("hideTimepicker")}),this},option:function(r,i){var s=this,o=s.data("timepicker-settings"),u=s.data("timepicker-list");if("object"==typeof r)o=e.extend(o,r);else if("string"==typeof r&&"undefined"!=typeof i)o[r]=i;else if("string"==typeof r)return o[r];return o=t(o),s.data("timepicker-settings",o),u&&(u.remove(),s.data("timepicker-list",!1)),o.useSelect&&n(s),this},getSecondsFromMidnight:function(){return y(c(this))},getTime:function(e){var t=this,n=c(t);if(!n)return null;e||(e=new Date);var r=y(n),i=new Date(e);return i.setHours(r/3600),i.setMinutes(r%3600/60),i.setSeconds(r%60),i.setMilliseconds(0),i},setTime:function(e){var t=this,n=g(y(e),t.data("timepicker-settings").timeFormat);return h(t,n),t.data("timepicker-list")&&f(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input"))return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"),this}};e.fn.timepicker=function(t){return this.length?T[t]?this.hasClass("ui-timepicker-input")?T[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):T.init.apply(this,arguments):this}});
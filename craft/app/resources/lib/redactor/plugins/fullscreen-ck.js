if(!RedactorPlugins)var RedactorPlugins={};RedactorPlugins.fullscreen={init:function(){this.fullscreen=!1;this.buttonAdd("fullscreen","Fullscreen",$.proxy(this.toggleFullscreen,this));this.opts.fullscreen&&this.toggleFullscreen()},toggleFullscreen:function(){var e;if(!this.fullscreen){this.buttonChangeIcon("fullscreen","normalscreen");this.buttonActive("fullscreen");this.fullscreen=!0;if(this.opts.toolbarExternal){this.toolcss={};this.boxcss={};this.toolcss.width=this.$toolbar.css("width");this.toolcss.top=this.$toolbar.css("top");this.toolcss.position=this.$toolbar.css("position");this.boxcss.top=this.$box.css("top")}this.fsheight=this.$editor.height();this.opts.maxHeight&&this.$editor.css("max-height","");this.opts.iframe&&(e=this.get());this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=$("<div/>"));this.$fullscreenPlaceholder.insertAfter(this.$box);this.$box.appendTo(document.body);this.$box.addClass("redactor_box_fullscreen");$("body, html").css("overflow","hidden");this.opts.iframe&&this.fullscreenIframe(e);this.fullScreenResize();$(window).resize($.proxy(this.fullScreenResize,this));$(document).scrollTop(0,0);this.focus();this.observeStart()}else{this.buttonRemoveIcon("fullscreen","normalscreen");this.buttonInactive("fullscreen");this.fullscreen=!1;$(window).off("resize",$.proxy(this.fullScreenResize,this));$("body, html").css("overflow","");this.$box.insertBefore(this.$fullscreenPlaceholder);this.$fullscreenPlaceholder.remove();this.$box.removeClass("redactor_box_fullscreen").css({width:"auto",height:"auto"});this.opts.iframe&&(e=this.$editor.html());this.opts.iframe?this.fullscreenIframe(e):this.sync();var t=this.fsheight;this.opts.autoresize&&(t="auto");this.opts.maxHeight&&this.$editor.css("max-height",this.opts.maxHeight);if(this.opts.toolbarExternal){this.$box.css("top",this.boxcss.top);this.$toolbar.css({width:this.toolcss.width,top:this.toolcss.top,position:this.toolcss.position})}this.opts.iframe?this.$frame.css("height",t):this.$editor.css("height",t);this.$editor.css("height",t);this.focus();this.observeStart()}},fullscreenIframe:function(e){this.$editor=this.$frame.contents().find("body");this.$editor.attr({contenteditable:!0,dir:this.opts.direction});if(this.$editor[0]){this.document=this.$editor[0].ownerDocument;this.window=this.document.defaultView||window}this.iframeAddCss();this.opts.fullpage?this.setFullpageOnInit(e):this.set(e);this.opts.wym&&this.$editor.addClass("redactor_editor_wym")},fullScreenResize:function(){if(!this.fullscreen)return!1;var e=this.$toolbar.height(),t=this.$editor.css("padding-top").replace("px",""),n=$(window).height()-e;this.$box.width($(window).width()-2).height(n+e);if(this.opts.toolbarExternal){this.$toolbar.css({top:"0px",position:"absolute",width:"100%"});this.$box.css("top",e+"px")}this.opts.iframe?setTimeout($.proxy(function(){this.$frame.height(n)},this),1):this.$editor.height(n-t*2);this.$editor.height(n)}};